---
order: 20
---

# 単位・公差・メッシュ健全性（製造に入る前のチェック）

Q: この章の目的は？

A: 後の工程（厚み付け/分割/穴あけ/ブーリアン/エクスポート）を安定させるための「最初の整地」です。  
有機外装は形状が複雑なぶん、**単位と公差**、そして**入力メッシュの健全性**が結果を左右します。

## 単位（Units）

Q: Rhinoの単位はどのように解釈されますか？

A: Rhinoは **ドキュメント単位**で全てが解釈されます。

- モデルがmm想定なら、ドキュメントもmmにする
  - 途中で単位を変えるとスケール問題が出やすいので、最初に固定する

Q: 単位/精度を確認・変更するコマンドは？

A: 以下のコマンドを使用します：
- `Units`（ドキュメント単位の確認/変更）
- `DocumentProperties` → Units / Tolerances（UIから確認する場合）

## 公差（Absolute tolerance）が重要な理由

Q: 公差が重要な理由は？

A: 製造向けの処理で頻出する失敗は、実は公差が原因であることが多いです。

- **Joinができない**（微小な隙間が残る）
- **Offset/Shellが破綻する**（薄肉・強曲率で顕在化）
- **Booleanが失敗する**（当たり面が荒い/交差が微妙）

方針としては、「必要以上に厳しくしない」＋「薄物・細部があるなら粗すぎない」が現実解です。

Q: 公差が原因か切り分けるコマンドは？

A: 以下のコマンドを使用します：
- `What`（オブジェクト種別の確認：MeshかBrepか）
- `Check`（Brepの健全性チェック）
- `SelBadObjects`（壊れている/問題のあるものを選択）
- `ShowEdges`（Naked edges などを可視化）

## メッシュ健全性（Mesh health）

Q: メッシュ健全性の確認が必要な理由は？

A: 今回の入力は「製造に向いていない既存メッシュ」なので、**問題の種類を切り分け**ます。

Q: よくあるメッシュの問題は？

A: 以下の問題があります：
- **穴（Open edges）**: どこかが開いていて閉じていない
- **法線の乱れ（Flipped/Inconsistent normals）**: 厚み付けやエクスポートで破綻
- **非多様体（Non-manifold）**: "面が枝分かれ"していて、ソリッドにならない
- **自交差（Self-intersection）**: 厚み付けでほぼ確実に失敗
- **薄すぎるディテール**: FDMで再現できない（耳/まぶた/鼻翼など）

Q: メッシュのチェック/修復コマンドは？

A: 以下のコマンドを使用します：
- **チェック**
  - `CheckMesh`（メッシュの問題をレポート）
  - `ShowEdges`（Naked edges が穴の場所）
  - `Dir`（法線方向の確認）
- **修復（軽微な場合）**
  - `UnifyMeshNormals`（法線を揃える）
  - `RepairMesh`（自動修復を試す）
  - `FillMeshHoles`（穴埋め）

> スクショ位置案: `ShowEdges` の表示（Naked edges / Non-manifold edges）

Q: 先にやるチェック（手順の型）は？

A: 以下の手順で進めます：
1. **見た目だけでなく断面を見る**（顔は特に）
   - 断面で"裏返り""極端な薄さ""折れ"を見つける
2. **穴の位置を特定する**
   - どこが開いているかを把握し、後で首開口や分割面として"設計に取り込める"か判断
3. **法線が揃っているか確認する**
   - 揃っていない場合、厚み方向が破綻する

Q: Grasshopper（Python）でメッシュ健全性を簡易チェックする方法は？

A: GH Pythonで「自己交差/法線」を簡易的に検出する例です（詳細な修復はRhino側で行います）。

```python
import rhinoscriptsyntax as rs

# input:
#   x: mesh id (Guid)

if x and rs.IsMesh(x):
    if not rs.MeshHasConsistentNormals(x):
        print("WARN: mesh normals are inconsistent")
    if rs.IsMeshSelfIntersecting(x):
        print("WARN: mesh is self-intersecting")
else:
    print("input is not a mesh")
```

Q: 製造に入る前の最終チェック項目は？
A: 以下の4点を確認し、後工程でのトラブルを防止します。
- **単位の整合性**: `Units` がmm想定になっているか。
- **致命的な欠陥**: `CheckMesh` や `SelBadObjects` で重大な問題が報告されていないか。
- **断面の健全性**: 断面を確認し、"薄すぎ・折れ・裏返り" などの異常がないか。
- **ワークフローの判断**: メッシュ修復が困難な場合、`QuadRemesh → SubD` への切り替えを検討したか。

**Q: テストピース（メッシュ由来の破綻を早期発見）の方法は？**

A: 以下の方法があります：
- **強曲率＋薄肉サンプル**: 目尻/鼻翼のような強曲率を含む小片で、厚み付けが破綻しないか見る
- **穴/非多様体の再現サンプル**: 修復前後で `CheckMesh` の結果が改善しているか比較する

**Q: "直す"より"作り直す"が早い場面は？**

A: 顔のような有機形状は、メッシュ修復に時間を溶かしがちです。  
次章の **`QuadRemesh` → SubD** に切り替えた方が、後工程（分割/厚み/穴/コネクタ）が効率的になります。

**Q: 次にやることは？**

A: 次章で、**メッシュ原型を編集可能な形（SubD）へ**持っていく標準手順をまとめます。

