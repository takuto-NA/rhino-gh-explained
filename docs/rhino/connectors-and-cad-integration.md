---
order: 60
---

# コネクタ追加・機構CADとの統合（壊しにくい合わせ方）

Q: 複雑な曲面を持つ外装（有機形状）に、ネジ穴やコネクタなどの精密な機構部品を統合する際、データの破綻を防ぐための鉄則は何ですか？

A: 最も重要なのは、**「当たり面（インターフェース）を独立して設計し、有機曲面に直接機構を配置しない」**ことです。

- **直接配置のリスク**: 有機的な曲面に直接ネジボスを立てたり穴を開けようとすると、法線が安定せず、ブーリアン演算の失敗や接合部の極端な薄肉化を招きます。
- **推奨される解決策**: 「外装（有機面）」と「機構部品」の間に、**平面パッド（平らな座）や円筒座**といった、単純で安定した幾何形状の中間層（インターフェース）を介在させます。この中間層を基準に設計することで、外装側の形状変更が機構側に直接悪影響を及ぼすのを防ぎ、変更に強い堅牢なデータ構造を維持できます。

## コネクタの設計パターンとRhinoでの作成手順

Q: 3Dプリントでの使用を想定し、外装側に「ねじ止めボス」や「はめ合い構造（嵌合）」を設ける際、Rhinoでの具体的なモデリング手順と強度の持たせ方は？

A: FDM（熱溶解積層）方式の特性を考慮し、**「安定した土台を先に作り、補強を添える」**流れで構築します。

1. **平面パッド（部品の載置面）**: 
   - `Rectangle`（長方形）で輪郭を描き、`ExtrudeCrv`（押し出し）で外装の内側に深く突き刺さるような厚みを持たせます。その後、`BooleanUnion` で外装と一体化させ、精密部品を載せるための「完全な平面」を作り出します。
2. **ねじ止めボス**:
   - `Cylinder` で円柱を作り、その根元に `ExtrudeCrv` で作成した「リブ（三角形の補強板）」を複数添えます。リブを設けることで、ネジ締め時の応力が分散され、根元からの破断リスクを大幅に軽減できます。
3. **嵌合（キーと段差）**:
   - `Box` や `ExtrudeCrv` で凸形状（キー）を作成します。
   - 相手側の凹形状を作る際は、元の凸形状を `Offset` 等でわずかに拡大（0.1mm〜0.3mm程度）したものを「カッター」として `BooleanDifference` することで、実際のプリント時にスムーズに嵌まるための「逃げ（クリアランス）」を正確に確保できます。

## スクリプトによるクリアランス処理の自動化

Q: プログラム（RhinoCommon）を用いて、クリアランス（隙間）を考慮したブーリアン演算を自動化するメリットと、その基本的なコードの実装イメージを教えてください。

A: 相手形状を正確に一定距離オフセットしてから切り抜く処理をコード化することで、手動でのオフセットし忘れや数値ミスを防ぎ、常に一定の嵌合品質（クリアランスの均一性）を保証できます。

```csharp
// クリアランスを考慮した切り欠き処理（概念例）
public static Brep CutWithClearance(Brep shell, Brep cutter, double clearance)
{
    double tol = 0.01;
    // カッターをクリアランス分だけ太らせる
    Brep[] offsetCutters = Brep.CreateOffsetBrep(cutter, clearance, true, false, tol, out _, out _);
    if (offsetCutters == null || offsetCutters.Length == 0) return null;

    // 太らせたカッターで外装（shell）を切り抜く
    return Brep.CreateBooleanDifference(shell, offsetCutters[0], tol)?[0];
}
```

## 統合ワークフローと最終チェック

Q: 有機的な外装モデルとメカニカルな機構部品を一つの完成したデータに統合する際、失敗のリスクを最小限に抑えるための理想的なワークフローは？

A: 各要素が独立して調整可能な状態を可能な限り維持するため、以下のステップを踏みます。

1. **外装のシェル化（殻化）**: 穴や自己交差のない、厚みを持った「閉じたソリッド（殻）」をまず完成させます。
2. **インターフェースの設置**: 外装の内側に、ネジボスや部品載置用の平面パッド（インターフェース）を構築します。
3. **機構の配置**: 作成したインターフェースを基準に、他CAD等から持ち込んだ機構部品の位置を合わせます。
4. **最終統合**: 最後にネジ穴の貫通や、ボスのブーリアン結合を行い、製造用データを書き出します。

**統合後のチェックポイント**:
- [ ] **ソリッドの気密性**: `Check` コマンドで、最終結果が「閉じたBrep (Closed Brep)」になっているか。
- [ ] **インターフェースの介在**: 機構部品が有機面に直接めり込んでいないか。必ず平面パッド等を介して接合されているか。
- [ ] **物理的な強度**: ボスやネジ穴の周囲に、ネジ締めやプリント時の衝撃に耐えられる十分な肉厚が確保されているか。
