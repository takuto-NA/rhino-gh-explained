---
order: 15
---

# SubDとは何か（Rhino 8）— NURBS / Brep との違い

この章は、Rhino 8で頻出する **SubD** を「何が嬉しいのか／何が苦手なのか」を、NURBSとBrep（境界表現）と対比して整理します。  
有機形状（キャラクター、フィギュア、プロップ、外装など）では、**SubDで造形 → 必要箇所だけNURBS/Brepで「当たり面/機構」を作る**方法が実用的です。

## まず用語整理：NURBS / Brep / SubD は “同じレイヤー” の概念ではない

- **NURBS**: 曲線・曲面の「数学的な表現」（パラメトリック曲面）
- **Brep**: 物体を「境界（面＋エッジ＋トリム）」で表す “データ構造/表現”  
  - 多くの場合、その面は **NURBS曲面**、エッジは **NURBS曲線** です
- **SubD**: 「粗い制御ケージ（四角面中心）を細分化して滑らかな曲面（極限曲面）を得る」表現  
  - 造形の操作単位が **面/辺/頂点**で直感的（ポリゴンモデリング寄り）

結論として、**NURBSは“曲面の数式”**、**Brepは“ソリッドを持つための枠組み”**、**SubDは“有機形状を素早く作るための曲面表現”**、という役割分担です。

## NURBS（数式での直感）

NURBSの曲線（概念）は、Bスプライン基底関数 \(N_{i,p}(u)\) と制御点 \(P_i\) の重み付き合成です。

- **Bスプライン曲線**:
\[
C(u)=\sum_i N_{i,p}(u)\,P_i
\]

- **NURBS曲線（有理）**:
\[
C(u)=\frac{\sum_i N_{i,p}(u)\,w_i\,P_i}{\sum_i N_{i,p}(u)\,w_i}
\]

曲面も同様に \(u,v\) の2変数に拡張されます。

### NURBSの強み

- **円・円筒・円錐などを正確に表現**できる（重み \(w\) が効く）
- ブーリアンやフィレットなど、**工業CAD的な処理と相性が良い**

### NURBSの弱み（有機形状で）

- “顔”のような有機形状を、面分割・連続性（G1/G2）込みで整えるのは手間がかかる
- 曲面編集が「制御点・次数・面構成」に引きずられやすい

## Brep（Boundary Representation）とは

**Brep = 境界表現**です。「このソリッドは、これらの面が閉じてできています」という構造を持ちます。

- **面**: 多くの場合 NURBS曲面（ただし“トリム”されていることが多い）
- **エッジ**: 面の境界（3D曲線＋2Dパラメトリック上のトリム曲線）
- **ループ/フェイス/シェル**: 関係性を管理して、ソリッドとして成立させる

### Brepの強み

- **“閉じた殻（ソリッド）”として扱える**（製造で重要）
- `Shell` / `BooleanDifference` など **ソリッド演算に適している**

### 注意点

「BrepだからNURBSとは別物」ではなく、**多くのBrepはNURBS曲面で構成される**、という理解が正確です。

## SubD（Subdivision Surface）とは

SubDは、**粗いケージ（主に四角面）**を反復的に細分化して、滑らかな極限曲面（limit surface）を得る表現です。Rhino 8はこのSubDを “CAD寄り” に使えるように統合しています。

### 直感：編集対象が「制御点」ではなく「ケージ」

- NURBS: 制御点が多くなりがち（面構成と連続性も管理対象）
- SubD: 低解像度のケージを動かすだけで、滑らかな曲面が付いてくる

### 数学的な要点（概要）

一般的なSubD（Catmull–Clark）は、細分化ステップで「面点」「辺点」「頂点点」を更新していき、反復回数を増やすと極限曲面に収束します。

特に重要なのが **特異点（extraordinary vertex）** です。四角格子でない頂点（次数≠4）の周りでは、極限曲面は “NURBSのように単純なパッチの集合” にはなりません。これが「SubD→NURBS変換で面が増える」主要因です。

### SubDの強み（今回の用途で）

- 顔・耳などの有機形状を **速く、破綻しにくく**作れる
- エッジフロー（目周り/口周り/耳付け根）を設計に組み込みやすい
- 必要なところだけ **Crease** でシャープさを残せる

### SubDの弱み（製造で気を付ける点）

- 厳密な円筒/平面/解析向け曲面など、**“正確さ”が欲しい箇所はNURBS/Brepが向く**
- そのまま“ソリッド演算の土台”にするより、**当たり面/機構部はBrepで作って合流**する方が壊れにくい

## 使い分け（有機外装の推奨）

- **外装の造形（顔/耳/頬/額）**: SubD中心
- **厚み・分割・穴・機構との当たり面**: Brep（NURBS）中心
- **変換**:
  - SubD→Brep（`ToNURBS`）は「当たり面を作る/ソリッド演算したい」タイミングで限定的に
  - 最終出力はSTL/3MFなので、最後は“プリント可能な殻”になっているかをスライサーで検証

## 関連（このサイト内）

- `mesh-to-subd-workflow.md`: メッシュ原型 → QuadRemesh → SubD の手順
- `variable-thickness-shell.md`: 1mmベースの厚み付け（Offset/Shell/OffsetMesh）と、SubDをどこでBrep/メッシュに寄せるか
- `subd-cad-interoperability-and-formats.md`: SubDを他CADへ渡す時に何が起きるか（STEP/IGES/STL/3MF）

