---
order: 15
---

# SubDとは何か（Rhino 8）— NURBS / Brep との違い

Q: Rhino 8で頻繁に使用される「SubD」と、従来の「NURBS」「Brep」にはどのような違いがあり、どのように使い分けるべきですか？

A: 有機的な形状（キャラクターの顔、フィギュア、外装など）を効率的にモデリングするには、各形式の「得意・不得意」を理解し、**SubDで大まかな造形を行い、精密な機構部や合わせ面はNURBS/Brepで作る**というハイブリッドなアプローチが最も実用的です。この章では、それぞれの形式の正体と役割を整理します。

Q: NURBS、Brep、SubDはそれぞれ独立した概念ですか？それとも相互に関連するデータ構造ですか？

A: これらは「同じ階層」の概念ではなく、役割が異なります。

- **NURBS**: 曲線や曲面を表すための「数学的な記述方法」そのものです。
- **Brep**: 物体を「境界（面・エッジ・頂点）」の集まりとして管理する「データ構造」です。多くのBrepは、その面としてNURBSを使用しています。
- **SubD**: 粗い多角形（ケージ）を細分化して滑らかな面を得る「造形手法および表現」です。

結論として、**NURBSは"曲面の数式"**、**Brepは"ソリッド（塊）として成立させる枠組み"**、**SubDは"有機形状を直感的に作るための表現"**、という役割分担です。

## NURBS（数式による精密な表現）

Q: NURBS（Non-Uniform Rational B-Spline）の数学的な定義と、モデルの形状を制御する仕組みを教えてください。

A: NURBSは、制御点 \(P_i\) とそれに対応する重み \(w_i\)、および基底関数 \(N_{i,p}(u)\) の組み合わせで計算される「有理曲線・曲面」です。

- **数学的イメージ**: 
\[
C(u)=\frac{\sum_i N_{i,p}(u)\,w_i\,P_i}{\sum_i N_{i,p}(u)\,w_i}
\]
重み \(w\) を調整することで、ポリゴンでは表現しにくい真円や円錐などを数学的に正確に記述できます。

Q: 工業デザインや設計において、NURBSという表現形式が優れている点はどこですか？

A: 以下の2点が非常に強力です。
- **幾何学的な正確さ**: 真円や円筒などを近似ではなく「完全な形」として扱えるため、機械部品の設計に不可欠です。
- **製造CADとの互換性**: ほぼすべてのハイエンドCADがNURBSを標準としているため、STEP形式等を通じたデータ受け渡しが安定します。

Q: 逆に、顔や体のような有機的な形状をモデリングする際、NURBSが抱える課題やデメリットは何ですか？

A: NURBSは「四角いパッチ」の集まりで面を構成するため、顔のような複雑な分岐や起伏を持つ形状を作ろうとすると、パッチ同士のつなぎ目（G1/G2連続性）の管理が極めて困難になり、モデリングに膨大な時間がかかります。

## Brep（ソリッドを管理する枠組み）

Q: CADでよく耳にする「Brep（Boundary Representation）」とは具体的にどのようなデータ構造を指しますか？

A: **Brep（境界表現）**は、「この物体は、これらの面が隙間なく閉じて構成されている」というトポロジ（接続関係）を管理する仕組みです。
- **面 (Face)**: 多くの場合、トリム（切り抜き）されたNURBS曲面。
- **エッジ (Edge)**: 面と面の境界線。
- **ソリッド (Solid)**: すべての面が完全に結合され、中身が詰まった状態。

Q: 3Dプリントや製造において、データが「Brep（ソリッド）」として構成されていることにはどのような利点がありますか？

A: **「中身の詰まった物体」**として定義されるため、肉厚を付ける（Shell）、穴を開ける（Boolean Difference）といったソリッド演算が確実に行えます。これはスライサーに渡すSTL/3MFを作成する前の、最終的な「設計の完成形」として非常に重要です。

Q: 「Brep」と「NURBS」を混同しがちですが、両者は具体的にどのような関係にあるのでしょうか？

A: 「BrepかNURBSか」という二択ではなく、**「NURBS曲面を面として使い、それらをBrepという枠組みで閉じたソリッドにまとめている」**というのが正確な関係です。

## SubD（有機形状を素早く作る）

Q: Rhino 8の大きな特徴である「SubD（サブディビジョン・サーフェス）」とは、どのような仕組みで曲面を表現するものですか？

A: SubDは、**粗いケージ（主に四角形の多角形）**を再帰的に細分化していくことで、滑らかな極限曲面（Limit Surface）を得る手法です。ポリゴンモデリングのような直感的な操作感で、非常に滑らかな曲面を生成できます。

Q: 形状を調整する際、SubDとNURBSでは操作する対象（コントロールポイント等）にどのような違いがありますか？

A: 
- **NURBS**: 数多くの制御点を個別に動かし、パッチの歪みを常に気にする必要があります。
- **SubD**: 低解像度の「面・辺・頂点」を動かすだけで、その背後の滑らかな曲面が自動的に追従してきます。少ない手数で大きな形状変化をコントロールできます。

Q: SubD（特にCatmull-Clark法）の数学的な特徴と、それがNURBS変換時に「面数が増える」原因にどう関係していますか？

A: SubDの曲面は、四角形が4つ集まる標準的な箇所ではNURBS（3次パッチ）と等価ですが、**「特異点（5つ以上の面が集まる頂点）」**の周囲ではNURBSで表現しきれない特殊な挙動をします。RhinoがSubDをNURBSに変換（`ToNURBS`）する際、この特異点周辺を多数の小さなNURBSパッチで近似するため、結果として面数が大幅に増えることになります。

Q: アニマトロニクスの外装（顔や耳など）を作る上で、SubDを使用する最大のメリットは何ですか？

A: 以下の3点が挙げられます。
- **圧倒的な造形スピード**: 有機的な凹凸を、粘土をこねるように素早く形にできる。
- **エッジフローの設計**: 目の周りや口のラインに沿ったポリゴンの流れを、造形段階で自然に組み込める。
- **折り目（Crease）の制御**: 柔らかい曲面の中に、意図的な「鋭いエッジ」を自由に混ぜられる。

Q: 製造や詳細設計の工程において、SubDが苦手とする表現や、運用上の注意点はありますか？

A: 厳密な円筒（ネジ穴）や完全な平面、あるいは高精度なクリアランス管理が必要な「機構部」の作成には向きません。これらはSubDで造形した後にNURBS/Brepへ変換するか、あるいは別で作ったBrep部品を合流させるのが正解です。

## 理想的な役割分担（まとめ）

Q: 最終的に、有機的な外装モデルを完成させるためのSubD、NURBS、Brepの「理想的な役割分担」を教えてください。

A: 以下のサイクルでデータを運用することを推奨します。

1. **外装のメイン造形（顔・耳・頬など）**: **SubD** を使用。QuadRemesh等を活用して綺麗なトポロジを作る。
2. **詳細設計・製造準備（厚み・分割・ネジ穴）**: SubDを **Brep (NURBS)** に変換、あるいはBrepの補助パーツを作成。
3. **最終出力（3Dプリント用）**: Brepから **STL/3MF（メッシュ）** を書き出し、スライサーで検証する。

「SubDですべてを完結させようとしない」ことが、エラーのない製造用データを作るコツです。
