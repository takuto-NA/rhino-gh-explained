---
order: 10
---

# Grasshopperの「履歴」と後編集（壊れにくい作り方）

## 基本概念

**Q: Grasshopperの「履歴」とは何ですか？**

A: Grasshopperの履歴は、**データフロー（入力→計算→出力）を定義した定義ファイル（.gh/.ghx）**です。入力パラメータを変更すると、自動的に再計算されます。RhinoのHistory機能とは別物です。つまり「後から変えたいところを入力にする」ことが、Grasshopperで履歴を残すことです。


**Q: RhinoのHistoryとGrasshopperの履歴はどう使い分けますか？**

A: **Grasshopperを主履歴として設計**し、RhinoのHistoryは補助的に使用する運用を推奨します。両方を同時に完璧に保つのは困難なため、GHで造形を管理し、Rhinoで仕上げを行う場合には、ベイク地点を意図的に設定します。

## 参照とベイク

**Q: Reference（参照）とは何ですか？**

A: GHからRhino上のオブジェクトを参照して計算する機能です。Rhino側のオブジェクトを置き換えると、GHも追従します。ただし、参照元のトポロジが変わる（例: 面分割が変わる、エッジ数が変わる）と、後段のコンポーネントが壊れることがあります。

**Q: Bake（ベイク）とは何ですか？**

A: GHの結果をRhinoに"固定"して出力する機能です。ベイクした瞬間にGHとのリンクは切れます（履歴はそこまで）。「造形はGHで」「仕上げはRhinoで」になる場合は、ベイク地点を意図的に設定すると運用が安定します。

## パラメータ設計

**Q: 後編集に強いパラメータの選び方は？**

A: 安定性の高い順に以下を推奨します：
- **数値（スライダー）**: 厚み、幅、高さ、オフセット量、角度
- **基準（平面/軸/点）**: 正中面、目の高さ、基準点（ランドマーク）
- **曲線（断面/ガイド）**: 断面を動かして形状を作る
- **（避けたい）トポロジ依存**: "面の○番目""エッジの○番目"のような参照

**Q: オフセットはGHで行うべきですか、Rhinoで行うべきですか？**

A: 用途によって判断します：
- **厚みを後から頻繁に振る** → GHで `Offset Surface` / `Offset Mesh` を使う価値が高い
- **最終確定のみ** → Rhino側で `OffsetSrf` / `Shell` を使用する方が安定する場合が多い

> 詳細（対象別のコンポーネント名）: `parametric-shell-example.md`

**Q: メッシュ→再構築のワークフローで注意すべきことは？**

A: トポロジ依存が壊れやすいので、**基準と断面曲線**を入力に寄せるのが安全です。

## 後編集しやすい定義の作り方

**Q: 後から編集しやすいGH定義の作法は？**

A: 以下の点を意識します：
- **入力を一箇所に集める**（スライダー群、基準平面、ランドマーク）
- **段階（レイヤー）を分ける**: 造形 → 厚み → 分割/穴 → 補強
- **中間結果を可視化**（プレビューON/OFF、ラベル、グループ化）
- **失敗しやすい所は"手前で検出"**（厚み前に曲率が強すぎないか等）

## 鏡像（左右対称）デザイン

**Q: 左右対称デザインをGrasshopperで作る方法は？**

A: **片側のみを設計し、対称平面でミラーする**方法が最も安定します。

**Q: 対称平面はどう設定しますか？**

A: 対称平面（多くの場合YZ平面）を決定し、GHに入力します。Rhino側で平面を用意して参照するか、GH内で `YZ Plane` のような基準平面を使います。

**Q: 片側だけ作る理由は？**

A: ランドマーク点、断面曲線、外形サーフェスなど、"形を決める要素"を片側だけにすることで、編集点が半分になり、後からの修正が容易になります。

**Q: Mirrorコンポーネントは何を使いますか？**

A: 標準GHの以下のコンポーネントを使用します：
- **ジオメトリ**: `Mirror`（Transform）- 入力: Geometry, Plane
- **点**: `Mirror Point`（Point）- 入力: Point, Plane

**Q: 継ぎ目（正中）の扱いは？**

A: 左右を単純に重ねると、正中で二重になったり、面が被ったりします。運用としては次のどちらかが安全です：
- **正中でピッタリ合わせて結合**（面/ソリッドにしたい時）
- **少しオーバーラップさせて後段でトリム/ブーリアン**（安定性優先）

**Q: 左右非対称を後から入れたい場合は？**

A: 「対称を維持する定義」と「非対称の差分」を分けます。対称モデルを作成し（Mirrorまで）、最後段に"差分"を足します（右だけ+2mm、左だけ角度変更など）。

## チェックリスト

**Q: 後編集できるか確認するポイントは？**

A: 以下を確認します：
- [ ] 変更したい値がスライダー/入力に集約されている
- [ ] 参照が"番号依存"になっていない（面0/エッジ3など）
- [ ] ベイク地点が意図的に決まっている（どこまでGHで管理するか）
- [ ] 破綻した時に直しやすい（段階が分離されている）

**Q: 対称が保てているか確認するポイントは？**

A: 以下を確認します：
- [ ] 対称平面が1つの入力として存在する
- [ ] 形状を決める要素（点/曲線/断面）は片側だけで管理している
- [ ] Mirror後の正中で二重/被りがない（意図的にオーバーラップさせる場合を除く）
